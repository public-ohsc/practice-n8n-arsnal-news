{
  "name": "ì›¹ì‚¬ì´íŠ¸ ìŠ¤í¬ëž˜í•‘ â†’ ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 */15 * * * *"
            }
          ]
        }
      },
      "id": "schedule-trigger",
      "name": "15ë¶„ë§ˆë‹¤ ì²´í¬",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "url": "https://news.naver.com/main/main.naver?mode=LSD&mid=shm&sid1=100",
        "options": {
          "response": {
            "response": {
              "responseFormat": "text"
            }
          }
        }
      },
      "id": "web-scraper",
      "name": "ë„¤ì´ë²„ ë‰´ìŠ¤ ìŠ¤í¬ëž˜í•‘",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [460, 300]
    },
    {
      "parameters": {
        "jsCode": "// HTMLì—ì„œ ë‰´ìŠ¤ ì œëª©ê³¼ ë§í¬ ì¶”ì¶œ\nconst html = $input.first().json.data;\nconst cheerio = require('cheerio');\nconst $ = cheerio.load(html);\n\nconst newsItems = [];\n\n// ë„¤ì´ë²„ ë‰´ìŠ¤ êµ¬ì¡°ì— ë§žê²Œ ì„ íƒìž ìˆ˜ì •\n$('.sh_item').each((index, element) => {\n  if (index < 5) { // ìµœì‹  5ê°œë§Œ\n    const title = $(element).find('.sh_text a').text().trim();\n    const link = $(element).find('.sh_text a').attr('href');\n    \n    if (title && link) {\n      newsItems.push({\n        title: title,\n        link: link.startsWith('http') ? link : 'https://news.naver.com' + link,\n        timestamp: new Date().toISOString()\n      });\n    }\n  }\n});\n\nreturn newsItems;"
      },
      "id": "html-parser",
      "name": "HTML íŒŒì‹±",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [680, 300]
    },
    {
      "parameters": {
        "jsCode": "// ë‰´ìŠ¤ ì•„ì´í…œì„ ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ë¡œ ë³€í™˜\nconst items = $input.all();\nconst messages = [];\n\nfor (const item of items) {\n  const message = {\n    object_type: \"text\",\n    text: `ðŸ“° ë„¤ì´ë²„ ë‰´ìŠ¤ ì•Œë¦¼\\n\\nðŸ“Œ ${item.json.title}\\n\\nðŸ”— ë§í¬: ${item.json.link}\\n\\nâ° ${new Date().toLocaleString('ko-KR')}`,\n    link: {\n      web_url: item.json.link\n    }\n  };\n  \n  messages.push({\n    template_object: JSON.stringify(message)\n  });\n}\n\nreturn messages;"
      },
      "id": "message-formatter",
      "name": "ë©”ì‹œì§€ í¬ë§·íŒ…",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 200]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://kapi.kakao.com/v2/api/talk/memo/default/send",
        "authentication": "none",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer {{ $env.KAKAO_ACCESS_TOKEN }}"
            },
            {
              "name": "Content-Type",
              "value": "application/x-www-form-urlencoded"
            }
          ]
        },
        "sendBody": true,
        "bodyContentType": "form-urlencoded",
        "bodyParameters": {
          "parameters": [
            {
              "name": "template_object",
              "value": "={{ $json.template_object }}"
            }
          ]
        },
        "options": {}
      },
      "id": "kakao-send",
      "name": "ì¹´ì¹´ì˜¤í†¡ ì „ì†¡",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1120, 200]
    }
  ],
  "connections": {
    "15ë¶„ë§ˆë‹¤ ì²´í¬": {
      "main": [
        [
          {
            "node": "ë„¤ì´ë²„ ë‰´ìŠ¤ ìŠ¤í¬ëž˜í•‘",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë„¤ì´ë²„ ë‰´ìŠ¤ ìŠ¤í¬ëž˜í•‘": {
      "main": [
        [
          {
            "node": "HTML íŒŒì‹±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTML íŒŒì‹±": {
      "main": [
        [
          {
            "node": "ë©”ì‹œì§€ í¬ë§·íŒ…",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë©”ì‹œì§€ í¬ë§·íŒ…": {
      "main": [
        [
          {
            "node": "ì¹´ì¹´ì˜¤í†¡ ì „ì†¡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {},
  "versionId": "1"
}
